@model DealDouble.ViewModels.AuctionsListingViewModel


    <div class="row">
        <div class="col-lg-12" id="listingArea">
            <h2>Auctions</h2>

            <table class="table table-hover">
                <thead>
                    <tr>
                        <th>
                            Title
                        </th>
                        <th>
                            Description
                        </th>
                        <th>
                            ActualAmount
                        </th>
                        <th>
                            Starting Time
                        </th>
                        <th>
                            Ending Time
                        </th>
                        <th>
                            Actions
                        </th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var auction in Model.Auctions)
                    {
                        <tr>
                            <td>
                                <input type="hidden" name="ID" value="@auction.ID" />
                                @auction.Title
                            </td>
                            <td>
                                @auction.Description
                            </td>
                            <td>
                                @auction.ActualAmount
                            </td>
                            <td>
                                @auction.StartingTime
                            </td>
                            <td>
                                @auction.EndingTime
                            </td>
                            <td>

                                <button class="editButton btn btn-primary" data-id="@auction.ID">Edit</button>
                                <button class="deleteButton btn btn-danger" data-id="@auction.ID">Delete</button>
                            </td>
                        </tr>

                    }
                </tbody>
            </table>

            <div>
                <button class=" btn btn-success" id="createButton" data-toggle="modal" data-target="#formModal">Create New Auction</button>
            </div>

           <!-- Modal -->
            <div class="modal fade" id="formModal" tabindex="-1" role="dialog" aria-hidden="true">
                <div class="modal-dialog" role="document">
                    <div class="modal-content" id="contentArea">

                  
                    </div>
                </div>
            </div>


            <script>
                $("#createButton").click(function () {
                    $.ajax({
                        url: "Create/",
                        type: "get"

                    }).done(function (response) {


                        $("#contentArea").html(response);
                    });
                });
                $(".editButton").click(function () {
                    $.ajax({
                        url: "Edit/",
                        method: "get",
                        data: {
                            ID: $(this).attr("data-id")
                        }

                    }).done(function (response) {


                        $("#contentArea").html(response);
                    });
                });

                $(".deleteButton").click(function () {

                    var result = confirm("Are you sure you want to delete this Auction?");

                    if (result == true) {

                        $.ajax({
                            url: "Delete/",
                            method: "post",
                            data: {
                                ID: $(this).attr("data-id")
                            }
                        })
                            .done(function (response) {
                                debugger;
                                $("#listingArea").html(response);
                            });
                    }
                });
            </script>
        </div>
    </div>

    
